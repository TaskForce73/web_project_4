!function(){"use strict";var e={730:function(e,t,n){e.exports=n.p+"2f8a4cd99a9a7a10b10b.png"},14:function(e,t,n){e.exports=n.p+"4e8e0a1d604782a0dff8.svg"}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}n.p="",function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n,s){e(this,"_getTemplate",(()=>(this._element=document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0),this._element))),e(this,"_handleDeleteButton",(()=>{this._element.remove(),this._element=null})),e(this,"_handleLikeButton",(()=>{this._likeButton.classList.toggle("element__button_active")})),e(this,"_setEventListeners",(()=>{this._elementBin=this._element.querySelector(".element__bin"),this._elementBin.addEventListener("click",(()=>{this._handleDeleteButton()})),this._likeButton.addEventListener("click",this._handleLikeButton),this._elementPicture.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))})),e(this,"generateCard",(()=>(this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".element__button"),this._elementPicture=this._element.querySelector(".element__picture"),this._setEventListeners(),this._elementPicture.src=this._link,this._elementPicture.alt="Photo of ".concat(this._name),this._element.querySelector(".element__header").textContent=this._name,this._element))),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleCardClick=s}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){s(this,"close",(()=>{this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscapeClose)})),s(this,"_handleEscapeClose",(e=>{"Escape"===e.key&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscapeClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__close"))&&this.close()}))}}class o extends i{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){const e={};return[...this._form.querySelectorAll(".popup__input")].forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._form.reset(),super.close()}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(e,t){r(this,"_showInputError",(e=>{this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)})),r(this,"_hideInputError",(e=>{this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""})),r(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e)})),r(this,"_hasInvalidInput",(e=>Array.from(e).some((e=>!e.validity.valid)))),r(this,"_toggleButtonState",(()=>{this._hasInvalidInput(this._inputsList)?(this._elementButton.classList.add(this._inactiveButtonClass),this._elementButton.setAttribute("disabled",!0)):(this._elementButton.classList.remove(this._inactiveButtonClass),this._elementButton.removeAttribute("disabled"))})),r(this,"_setEventListeners",(()=>{this._inputsList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._toggleButtonState(),this._inputsList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))})),r(this,"enableValidation",(()=>{this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()})),r(this,"resetValidation",(()=>{this._inputsList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._elementButton=this._formElement.querySelector(this._submitButtonSelector)}}const a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};var u=n(14),c=n(730);const p=document.querySelector(".profile__plus"),_=document.querySelector(".popup__form"),h=document.querySelector(".profile__edit"),d=document.querySelector(".popup__form_second"),m=document.querySelector(".elements__list"),f=document.querySelector(".popup__input-name"),v=document.querySelector(".popup__input-about");document.getElementById("around-the-us").src=u,document.getElementById("profile-image").src=c;const b=new l(a,d);b.enableValidation();const E=new l(a,_);E.enableValidation();const y=new class extends i{open(e,t){const n=this._popup.querySelector(".popup__image");this._popup.querySelector(".popup__description").textContent=e,n.alt="Photo of ".concat(e),n.src=t,super.open()}}(".popup_big_image");y.setEventListeners();const S=new o(".popup_profile_adder",(e=>{k.setUserInfo(e)}));S.setEventListeners();const L=new o(".popup_card_publisher",(e=>{const t={link:e.link,name:e.description};g(t)}));L.setEventListeners();const g=e=>{const n=new t(e,"#card-template",((e,t)=>y.open(e,t))).generateCard();m.prepend(n)};new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}render(){this._items.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].reverse(),renderer:g},".elements__list").render();const k=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:n}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(n)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{name:t,about:n}=e;this._profileName.textContent=t,this._profileJob.textContent=n}}({profileNameSelector:".profile__author",profileJobSelector:".profile__text"});h.addEventListener("click",(()=>{E.resetValidation(_),function(){const e=k.getUserInfo();f.value=e.name,v.value=e.job}(),S.open()})),p.addEventListener("click",(()=>{b.resetValidation(d),L.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUNOQyxLQUFNLDBEQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxtREFFUixDQUNFRCxLQUFNLHdCQUNOQyxLQUFNLG1EQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0saURDOEJjaUcsVUFDcEJQLFNBQVVOLEdBRVosbUJBRU1ZLFNBRVIsTUFBTWpCLEVBQVcsSUc5REYsTUFDYjVHLFlBQVksR0FBNkMsSUFBN0Msb0JBQUUrSCxFQUFGLG1CQUF1QkMsR0FBc0IsRUFDdkQ1SCxLQUFLNkgsYUFBZTNILFNBQVNDLGNBQWN3SCxHQUMzQzNILEtBQUs4SCxZQUFjNUgsU0FBU0MsY0FBY3lILEdBRTVDRyxjQUNFLE1BQU8sQ0FDTHZHLEtBQU14QixLQUFLNkgsYUFBYXRHLFlBQ3hCeUcsSUFBS2hJLEtBQUs4SCxZQUFZdkcsYUFHMUJrRixZQUFZLEdBQWlCLElBQWpCLEtBQUVqRixFQUFGLE1BQVF5RyxHQUFTLEVBQzNCakksS0FBSzZILGFBQWF0RyxZQUFjQyxFQUNoQ3hCLEtBQUs4SCxZQUFZdkcsWUFBYzBHLElIaURMLENBQzVCTixvQkFBcUIsbUJBQ3JCQyxtQkFBb0IsbUJBaUJ0QmxDLEVBQWtCOUUsaUJBQWlCLFNBQVMsS0FDMUN3RixFQUFxQjhCLGdCQUFnQnpDLEdBUHZDLFdBQ0UsTUFBTTBDLEVBQVczQixFQUFTdUIsY0FDMUJsQyxFQUFpQjVDLE1BQVFrRixFQUFTM0csS0FDbENzRSxFQUFrQjdDLE1BQVFrRixFQUFTSCxJQUtuQ0ksR0FDQTdCLEVBQVVyRSxVQUdac0QsRUFBa0I1RSxpQkFBaUIsU0FBUyxLQUMxQ3NGLEVBQWtCZ0MsZ0JBQWdCdkMsR0FDbENlLEVBQWF4RSxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gcm9tVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlID0gKCkgPT4ge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9O1xuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24gPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMuX2VsZW1lbnQ7XG4gICAgY2FyZC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBfaGFuZGxlTGlrZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19idXR0b25fYWN0aXZlXCIpO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50QmluID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2JpblwiKTtcbiAgICB0aGlzLl9lbGVtZW50QmluLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcbiAgICB0aGlzLl9lbGVtZW50UGljdHVyZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgIH0pO1xuICB9O1xuXG4gIGdlbmVyYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9lbGVtZW50UGljdHVyZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19waWN0dXJlXCIpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZWxlbWVudFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50UGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2hlYWRlclwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgfVxuXG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIikgfHxcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUVzY2FwZUNsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fZWxlbWVudEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKGlucHV0c0xpc3QpID0+IHtcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGlucHV0c0xpc3QpO1xuICAgIHJldHVybiBpbnB1dHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dHNMaXN0KSkge1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0c0xpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0c0xpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH07XG59XG4iLCJleHBvcnQgeyBpbml0aWFsQ2FyZHMsIHBhZ2VTZXR0aW5ncyB9O1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgcGFnZVNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zyb21WYWxpZGF0b3JcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgcGFnZVNldHRpbmdzIH0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzXCI7XG5cbmNvbnN0IHBsdXNQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wbHVzXCIpO1xuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fc2Vjb25kXCIpO1xuY29uc3QgZWxlbWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saXN0XCIpO1xuY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LW5hbWVcIik7XG5jb25zdCBwcm9maWxlSW5wdXRBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LWFib3V0XCIpO1xuXG5pbXBvcnQgaGVhZGVyU3JjIGZyb20gXCIuLi9pbWFnZXMvaGVhZGVyLnN2Z1wiO1xuY29uc3QgaGVhZGVySW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFyb3VuZC10aGUtdXNcIik7XG5oZWFkZXJJbWFnZS5zcmMgPSBoZWFkZXJTcmM7XG5cbmltcG9ydCBwcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvQ291c3RlYXUucG5nXCI7XG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtaW1hZ2VcIik7XG5wcm9maWxlSW1hZ2Uuc3JjID0gcHJvZmlsZVNyYztcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYWdlU2V0dGluZ3MsIGNhcmRGb3JtKTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYWdlU2V0dGluZ3MsIHByb2ZpbGVGb3JtKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9iaWdfaW1hZ2VcIik7XG5pbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3Byb2ZpbGVfYWRkZXJcIiwgKGRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG59KTtcbmVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9jYXJkX3B1Ymxpc2hlclwiLCAoZGF0YSkgPT4ge1xuICBjb25zdCBuZXdDYXJkT2JqZWN0ID0ge1xuICAgIGxpbms6IGRhdGEubGluayxcbiAgICBuYW1lOiBkYXRhLmRlc2NyaXB0aW9uLFxuICB9O1xuICByZW5kZXJDYXJkKG5ld0NhcmRPYmplY3QpO1xufSk7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVOZXdDYXJkKGRhdGEpO1xuICBlbGVtZW50TGlzdC5wcmVwZW5kKGNhcmQpO1xufTtcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcy5yZXZlcnNlKCksXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG4gIFwiLmVsZW1lbnRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlcigpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F1dGhvclwiLFxuICBwcm9maWxlSm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RleHRcIixcbn0pO1xuXG5mdW5jdGlvbiBjcmVhdGVOZXdDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgKG5hbWUsIGxpbmspID0+XG4gICAgaW1hZ2VNb2RhbC5vcGVuKG5hbWUsIGxpbmspXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUlucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gIHByb2ZpbGVJbnB1dEFib3V0LnZhbHVlID0gdXNlckRhdGEuam9iO1xufVxuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24ocHJvZmlsZUZvcm0pO1xuICBmaWxsUHJvZmlsZUZvcm0oKTtcbiAgZWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuXG5wbHVzUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oY2FyZEZvcm0pO1xuICBhZGRDYXJkTW9kYWwub3BlbigpO1xufSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gICAgY29uc3QgY2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xuICAgIGNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGltYWdlLmFsdCA9IGBQaG90byBvZiAke25hbWV9YDtcbiAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoZGF0YSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9lbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2NhcmRTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW1vdmUiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9lbGVtZW50QmluIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9lbGVtZW50UGljdHVyZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJuYW1lIiwibGluayIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJlIiwia2V5IiwiY2xvc2UiLCJvcGVuIiwiYWRkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiX2lucHV0RXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRzTGlzdCIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0c0xpc3QiLCJfZWxlbWVudEJ1dHRvbiIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2lucHV0U2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwYWdlU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJwbHVzUHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVGb3JtIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJjYXJkRm9ybSIsImVsZW1lbnRMaXN0IiwicHJvZmlsZUlucHV0TmFtZSIsInByb2ZpbGVJbnB1dEFib3V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJoZWFkZXJTcmMiLCJwcm9maWxlU3JjIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJpbWFnZU1vZGFsIiwiaW1hZ2UiLCJlZGl0TW9kYWwiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWRkQ2FyZE1vZGFsIiwibmV3Q2FyZE9iamVjdCIsImRlc2NyaXB0aW9uIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJwcmVwZW5kIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicmVuZGVyIiwicmV2ZXJzZSIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlSm9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsImdldFVzZXJJbmZvIiwiam9iIiwiYWJvdXQiLCJyZXNldFZhbGlkYXRpb24iLCJ1c2VyRGF0YSIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=